<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Student Showcase</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/styles/header.css" />
</head>
<body>

  <!-- Sidebar for small screens -->
  <div class="sidebar" id="sidebar">
    <ul>
      <li><a href="/user/home" onclick="closeSidebar()">Home</a></li>
      <li><a href="/user/aboutus" onclick="closeSidebar()">About Us</a></li>
      <% if (session.user && session.user.role === 'student') { %>
        <li><a href="/user/upload" onclick="closeSidebar()">Upload</a></li>
      <% } %>
      <li><a href="/user/projects" onclick="closeSidebar()">Projects</a></li>
    </ul>
  </div>

  <!-- Header -->
  <header class="header">
    <!-- Hamburger -->
    <div class="menu-toggle" onclick="toggleSidebar(this)">
      <span></span>
      <span></span>
      <span></span>
    </div>

    <!-- Logo -->
    <div class="logo">
      <img src="/images/logo.png" alt="Logo" class="logo-image" />
      <h1>Student Project Showcase</h1>
    </div>

    <!-- Desktop Navigation -->
    <nav class="nav">
      <ul>
        <li><a href="/user/home">Home</a></li>
        <li><a href="/user/aboutus">About Us</a></li>
        <% if (session && session.user && session.user.role === 'student'){ %>
          <li><a href="/user/upload">Upload</a></li>
        <% } %>
        <li><a href="/user/projects">Projects</a></li>
      </ul>
    </nav>

    <!-- User Profile Dropdown -->
    <div class="dropdown" id="userDropdown" onclick="toggleDropdown(event)">
      <img src="/images/user-profile.png" alt="User" />
      <span class="arrow">â–¼</span>
      <div class="dropdown-menu" id="dropdownMenu">
        <% if (session.user && session.user.role === 'student') { %>
          <a href="/user/dashboard">Dashboard</a>
        <% } %>
        <a href="/logout">Logout</a>
      </div>
    </div>

  </header>

  <!-- Scripts -->
  <script>
    function toggleSidebar(button) {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('active');
      button.classList.toggle('open');
    }

    function closeSidebar() {
      document.getElementById('sidebar').classList.remove('active');
      document.querySelector('.menu-toggle').classList.remove('open');
    }

    function toggleDropdown(event) {
      event.stopPropagation();
      const dropdownMenu = document.getElementById('dropdownMenu');
      dropdownMenu.classList.toggle('show');
    }

    window.addEventListener('click', function (e) {
      const dropdown = document.getElementById('userDropdown');
      const menu = document.getElementById('dropdownMenu');
      if (!dropdown.contains(e.target)) {
        menu.classList.remove('show');
      }

      const sidebar = document.getElementById('sidebar');
      const toggleBtn = document.querySelector('.menu-toggle');
      if (!sidebar.contains(e.target) && !toggleBtn.contains(e.target)) {
        closeSidebar();
      }
    });

    document.addEventListener('DOMContentLoaded', function () {
    const currentPath = window.location.pathname;

    // Desktop nav
    document.querySelectorAll('.nav a').forEach(link => {
      if (link.getAttribute('href') === currentPath) {
        link.classList.add('active');
      }
    });

    // Sidebar nav
    document.querySelectorAll('.sidebar a').forEach(link => {
      if (link.getAttribute('href') === currentPath) {
        link.classList.add('active');
      }
    });
  });
  </script>
</body>
</html>
